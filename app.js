document.querySelectorAll("details.info-card").forEach(function(e){const t=e.querySelector(".card-body");t&&(e.open||(t.style.gridTemplateRows="0fr"),e.addEventListener("toggle",()=>{e.open?requestAnimationFrame(()=>{t.style.gridTemplateRows="1fr"}):requestAnimationFrame(()=>{t.style.gridTemplateRows="0fr"})}))});
!function(e){"use strict";const t=document.querySelector("#mass"),o=document.querySelector("#mat"),n=document.querySelector("#force"),r=document.querySelector("#forceVal"),c=document.querySelector("#showFrictions"),i=document.querySelector("#showForces"),u=document.querySelector("#reset"),d=document.querySelector("#arrow-force"),a=document.querySelector("#arrow-normal"),s=document.querySelector("#arrow-gravity"),m=document.querySelector("#arrow-static"),l=document.querySelector("#arrow-dynamic"),S=document.querySelector("#fricVal"),F=document.querySelector("#netVal"),h=document.querySelector("#accVal"),y={wood:{muS:.4,muK:.3},metal:{muS:.3,muK:.2}},q={getMass:()=>Number(t.value),getMaterial:()=>o.value,showFrictions:()=>c.checked,showForces:()=>i.checked};function v(){const e=FrictionSim.getState();S.textContent=e.fric.toFixed(2),F.textContent=e.fTotal.toFixed(2),h.textContent=e.a.toFixed(2),requestAnimationFrame(v)}e.FrictionGui=q,window.addEventListener("DOMContentLoaded",()=>{!function(){FrictionSim.setG(10),FrictionSim.setMass(parseFloat(t.value));const e=y[o.value];FrictionSim.setMuS(e.muS),FrictionSim.setMuK(e.muK);const c=parseFloat(n.value);FrictionSim.setAppliedForce(c),r.textContent=`${c} N`}(),t.addEventListener("change",()=>{FrictionSim.setMass(parseFloat(t.value))}),o.addEventListener("change",()=>{const e=y[o.value];FrictionSim.setMuS(e.muS),FrictionSim.setMuK(e.muK)}),n.addEventListener("input",()=>{const e=parseFloat(n.value);FrictionSim.setAppliedForce(e),r.textContent=`${e} N`}),c.addEventListener("change",()=>{const e=c.checked;m.hidden=!e,l.hidden=!e}),i.addEventListener("change",()=>{const e=i.checked;d.hidden=!e,a.hidden=!e,s.hidden=!e}),u.addEventListener("click",()=>{FrictionSim.reset()}),v(),FrictionSim.resume()})}("undefined"!=typeof window?window:globalThis);
!function(t){let e=5,s=9.8,a=.6,i=.45,c=12,o=1/120;const n={t:0,x:0,v:0,a:0,fric:0,fTotal:0,forces:{applied:0,gravity:0,normal:0,staticFric:0,kineticFric:0},paused:!1};const r={getState:()=>n,getFixedDt:()=>o,setFixedDt:t=>{o=Math.max(.001,+t||o)},setMass:t=>{e=Math.max(.001,+t)},setMuS:t=>{a=Math.max(0,+t)},setMuK:t=>{i=Math.max(0,+t)},setG:t=>{s=Math.max(0,+t)},setAppliedForce:t=>{c=+t},pause:(t=!0)=>{n.paused=!!t},resume:()=>{n.paused=!1},reset:()=>{n.t=0,n.x=0,n.v=0,n.a=0},getMass:()=>e,getMuS:()=>a,step:function(t){const o=e*s,r=e*s,M=c,d=1e-4;let f=0,x=0,l=0;const h=a*o;let p=0,u=0;if(Math.abs(n.v)<d&&Math.abs(M)<=h)f=-M,l=0,p=f;else{const t=Math.abs(n.v)>=d?Math.sign(n.v):0!==M?Math.sign(M):0;x=-i*o*t;const s=M+x;l=s/e,p=x,u=s}n.v+=l*t,n.x+=n.v*t,n.a=l,n.fric=p,n.fTotal=u,n.forces.applied=M,n.forces.gravity=r,n.forces.normal=o,n.forces.staticFric=f,n.forces.kineticFric=x,n.t+=t;const v=windowWidth/FrictionRenderer.getPixelsPerMeter();n.x>.5*v-1&&(n.x=.5*v-1,n.v=0),n.x<.5*-v+1&&(n.x=.5*-v+1,n.v=0)}};t.FrictionSim=r}("undefined"!=typeof window?window:globalThis);
function preload(){FrictionRenderer.preload()}function setup(){FrictionRenderer.setup()}function draw(){FrictionRenderer.draw()}function windowResized(){FrictionRenderer.windowResized()}!function(i){"use strict";let e,t,o=90,n=6,c=0,r={};function a(i,e,t,o,n){const c=t-i,r=o-e,a=Math.hypot(c,r)||1,s=c/a,d=r/a,g=constrain(.18*a,8,16),h=t-s*g,l=o-d*g;stroke(n),fill(n),strokeWeight(3),line(i,e,h,l);const w=.4*g;triangle(t,o,h-d*w,l+s*w,h+d*w,l-s*w)}const s={getPixelsPerMeter:()=>o,preload:function(){e=loadImage("image/background.jpg"),t=loadImage("image/table.png"),r.wood=loadImage("image/block-wood.png"),r.metal=loadImage("image/block-metal.png")},setup:function(){createCanvas(windowWidth,windowHeight),pixelDensity(Math.min(displayDensity(),2)),rectMode(CENTER),strokeCap(SQUARE),noSmooth(),imageMode(CENTER)},draw:function(){const i=Math.min(50,deltaTime)/1e3;if(!FrictionSim.getState().paused){c+=i;const e=FrictionSim.getFixedDt();for(;c>=e;)FrictionSim.step(e),c-=e}!function(){const i=width,c=height;if(e){const t=e.width/e.height;let o,n;i/c>t?(o=i,n=i/t):(n=c,o=c*t),image(e,.5*i,.5*c,o,n)}const s=c-80;if(t){const e=.8*t.height,o=i+60,n=-50;image(t,.5*i,s+n+.5*e,o-200+2,e,100,0,t.width-200,t.height),image(t,.5*i+.5*o-50,s+n+.5*e,100,e,t.width-100,0,100,t.height),image(t,.5*i-.5*o+50,s+n+.5*e,100,e,0,0,100,t.height)}else stroke(60),strokeWeight(2),line(0,s,i,s);const d=FrictionSim.getState(),g=(F=FrictionSim.getMass(),F>5?1.26:1),h=1.6*g*o,l=1.28*g*o,w=.5*i+d.x*o,f=s-l/2,m=(u=FrictionGui.getMaterial(),"metal"==u?r.metal:r.wood);var u;var F;if(m){const i=m.width/m.height;let e,t;h/l>i?(t=l,e=t*i):(e=h,t=e/i),image(m,w,f,e,t)}else fill("#213241"),stroke("#99b6c9"),strokeWeight(2),rect(w,f,h,l,10);const p=i=>i*n,k=i=>i*n*.25;FrictionGui.showForces()&&(a(w,f,w+p(d.forces.applied),f,"#dc3c3c"),a(w,f,w,f+k(d.forces.gravity),"#202020"),a(w,f,w,f-k(d.forces.normal),"#28c878"));FrictionGui.showFrictions()&&(Math.abs(d.forces.staticFric)>1e-8&&a(w,f+l/2-3,w+p(d.forces.staticFric),f+l/2-3,"#3c8cff"),Math.abs(d.forces.kineticFric)>1e-8&&a(w,f+l/2-3,w+p(d.forces.kineticFric),f+l/2-3,"#bed6ee"))}()},windowResized:function(){resizeCanvas(windowWidth,windowHeight),n=constrain(Math.round(width/160),3,10)}};i.FrictionRenderer=s}("undefined"!=typeof window?window:globalThis);