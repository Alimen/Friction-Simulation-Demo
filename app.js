document.querySelectorAll("details.info-card").forEach(function(e){const t=e.querySelector(".card-body");t&&(e.open||(t.style.gridTemplateRows="0fr"),e.addEventListener("toggle",()=>{e.open?requestAnimationFrame(()=>{t.style.gridTemplateRows="1fr"}):requestAnimationFrame(()=>{t.style.gridTemplateRows="0fr"})}))});
!function(e){"use strict";const t=document.querySelector("#mass"),n=document.querySelector("#mat"),o=document.querySelector("#force"),i=document.querySelector("#forceVal"),r=document.querySelector("#showFrictions"),c=document.querySelector("#showForces"),u=document.querySelector("#reset"),a=document.querySelector("#pause"),d=document.querySelector("#arrow-normal"),s=document.querySelector("#arrow-gravity"),m=document.querySelector("#arrow-static"),l=document.querySelector("#arrow-dynamic"),S=document.querySelector("#fricVal"),F=document.querySelector("#netVal"),y=document.querySelector("#accVal"),h={wood:{muS:.4,muK:.3},metal:{muS:.3,muK:.2}},v={getMass:()=>Number(t.value),getMaterial:()=>n.value,showFrictions:()=>r.checked,showForces:()=>c.checked};function q(){const e=FrictionSim.getState();S.textContent=e.fric.toFixed(2),F.textContent=e.fTotal.toFixed(2),y.textContent=e.a.toFixed(2),requestAnimationFrame(q)}e.FrictionGui=v,window.addEventListener("DOMContentLoaded",()=>{!function(){FrictionSim.setG(10),FrictionSim.setMass(parseFloat(t.value));const e=h[n.value];FrictionSim.setMuS(e.muS),FrictionSim.setMuK(e.muK);const r=parseFloat(o.value);FrictionSim.setAppliedForce(r),i.textContent=`${r} N`}(),t.addEventListener("change",()=>{FrictionSim.setMass(parseFloat(t.value))}),n.addEventListener("change",()=>{const e=h[n.value];FrictionSim.setMuS(e.muS),FrictionSim.setMuK(e.muK)}),o.addEventListener("input",()=>{const e=parseFloat(o.value);FrictionSim.setAppliedForce(e),i.textContent=`${e} N`}),r.addEventListener("change",()=>{const e=r.checked;m.hidden=!e,l.hidden=!e}),c.addEventListener("change",()=>{const e=c.checked;d.hidden=!e,s.hidden=!e}),u.addEventListener("click",()=>{FrictionSim.reset()}),a.addEventListener("click",()=>{FrictionSim.getState().paused?(a.innerHTML="暫停",FrictionSim.resume()):(a.innerHTML="繼續",FrictionSim.pause())}),q(),FrictionSim.resume()})}("undefined"!=typeof window?window:globalThis);
!function(t){let e=5,s=9.8,a=.6,i=.45,c=12,o=1/120;const n={t:0,x:0,v:0,a:0,fric:0,fTotal:0,forces:{applied:0,gravity:0,normal:0,staticFric:0,kineticFric:0},paused:!1};const r={getState:()=>n,getFixedDt:()=>o,setFixedDt:t=>{o=Math.max(.001,+t||o)},setMass:t=>{e=Math.max(.001,+t)},setMuS:t=>{a=Math.max(0,+t)},setMuK:t=>{i=Math.max(0,+t)},setG:t=>{s=Math.max(0,+t)},setAppliedForce:t=>{c=+t},pause:()=>{n.paused=!0},resume:()=>{n.paused=!1},reset:()=>{n.t=0,n.x=0,n.v=0,n.a=0},getMass:()=>e,getMuS:()=>a,step:function(t){const o=e*s,r=e*s,d=c,M=1e-4;let f=0,x=0,l=0;const p=a*o;let h=0,u=0;if(Math.abs(n.v)<M&&Math.abs(d)<=p)f=-d,l=0,h=f;else{const t=Math.abs(n.v)>=M?Math.sign(n.v):0!==d?Math.sign(d):0;x=-i*o*t;const s=d+x;l=s/e,h=x,u=s}n.paused||(n.v+=l*t,n.x+=n.v*t),n.a=l,n.fric=h,n.fTotal=u,n.forces.applied=d,n.forces.gravity=r,n.forces.normal=o,n.forces.staticFric=f,n.forces.kineticFric=x,n.t+=t;const v=windowWidth/FrictionRenderer.getPixelsPerMeter();n.x>.5*v-1&&(n.x=.5*v-1,n.v=0),n.x<.5*-v+1&&(n.x=.5*-v+1,n.v=0)}};t.FrictionSim=r}("undefined"!=typeof window?window:globalThis);
function preload(){FrictionRenderer.preload()}function setup(){FrictionRenderer.setup()}function draw(){FrictionRenderer.draw()}function windowResized(){FrictionRenderer.windowResized()}!function(i){"use strict";let e,t,o=90,n=7,c=0,r={};function a(i,e,t,o,n){const c=t-i,r=o-e,a=Math.hypot(c,r)||1,s=c/a,d=r/a,g=constrain(.18*a,8,16),h=t-s*g,l=o-d*g;stroke(n),fill(n),strokeWeight(9),line(i,e,h,l);const w=.4*g;triangle(t,o,h-d*w,l+s*w,h+d*w,l-s*w)}const s={getPixelsPerMeter:()=>o,preload:function(){e=loadImage("image/background.jpg"),t=loadImage("image/table.png"),r.wood=loadImage("image/block-wood.png"),r.metal=loadImage("image/block-metal.png")},setup:function(){createCanvas(windowWidth,windowHeight),pixelDensity(Math.min(displayDensity(),2)),rectMode(CENTER),strokeCap(SQUARE),noSmooth(),imageMode(CENTER),n=constrain(Math.round(height/72),3,10)},draw:function(){const i=Math.min(50,deltaTime)/1e3;c+=i;const s=FrictionSim.getFixedDt();for(;c>=s;)FrictionSim.step(s),c-=s;!function(){const i=width,c=height;if(e){const t=e.width/e.height;let o,n;i/c>t?(o=i,n=i/t):(n=c,o=c*t),image(e,.5*i,.5*c,o,n)}const s=.72*c;if(t){const e=120,o=c-s+100-e,n=t.height,r=i+60,a=.5*i,d=a+.5*r-50,g=a-.5*r+50,h=s+-50,l=h+.5*e,w=h+e+.5*o;image(t,a,l,r-200+2,e,100,0,t.width-200,e/.8),image(t,d,l,100,e,t.width-100,0,100,e/.8),image(t,g,l,100,e,0,0,100,e/.8),image(t,a,w,r-200+2,o,100,n-50,t.width-200,50),image(t,d,w,100,o,t.width-100,n-50,100,50),image(t,g,w,100,o,0,n-50,100,50)}else stroke(60),strokeWeight(2),line(0,s,i,s);const d=FrictionSim.getState(),g=(F=FrictionSim.getMass(),F>5?1.26:1),h=1.6*g*o,l=1.28*g*o,w=.5*i+d.x*o,m=s-l/2,f=(u=FrictionGui.getMaterial(),"metal"==u?r.metal:r.wood);var u;var F;if(f){const i=f.width/f.height;let e,t;h/l>i?(t=l,e=t*i):(e=h,t=e/i),image(f,w,m,e,t)}else fill("#213241"),stroke("#99b6c9"),strokeWeight(2),rect(w,m,h,l,10);const p=i=>i*n*.25,k=i=>i*n*.25;a(w,m,w+p(d.forces.applied),m,"#dc3c3c"),FrictionGui.showForces()&&(a(w,m,w,m+k(d.forces.gravity),"#202020"),a(w,m,w,m-k(d.forces.normal),"#28c878"));FrictionGui.showFrictions()&&(Math.abs(d.forces.staticFric)>1e-8&&a(w,m+l/2-3,w+p(d.forces.staticFric),m+l/2-3,"#3c8cff"),Math.abs(d.forces.kineticFric)>1e-8&&a(w,m+l/2-3,w+p(d.forces.kineticFric),m+l/2-3,"#bed6ee"))}()},windowResized:function(){resizeCanvas(windowWidth,windowHeight),n=constrain(Math.round(height/72),3,10)}};i.FrictionRenderer=s}("undefined"!=typeof window?window:globalThis);